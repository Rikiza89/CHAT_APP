<!-- templates/accounts/profile.html -->
{% extends 'base.html' %}

{% block title %}{{ profile_user.username }}'s Profile{% endblock %}

{% block content %}
<div class="container" style="max-width: 900px; margin-top: 30px;">
    <div style="background: white; padding: 40px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        <div style="display: flex; align-items: center; gap: 30px; margin-bottom: 30px;">
            <div style="width: 120px; height: 120px; border-radius: 50%; background: #007bff; color: white; 
                        display: flex; align-items: center; justify-content: center; font-size: 3rem; font-weight: bold;">
                {% if profile_user.avatar %}
                    <img src="{{ profile_user.avatar.url }}" alt="{{ profile_user.username }}" 
                         style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">
                {% else %}
                    {{ profile_user.username|first|upper }}
                {% endif %}
            </div>
            
            <div style="flex: 1;">
                <h1 style="margin-bottom: 10px;">{{ profile_user.username }}</h1>
                <p style="color: #666; margin-bottom: 15px;">{{ profile_user.status_message|default:"No status message" }}</p>
                
                {% if user == profile_user %}
                    <a href="{% url 'accounts:edit_profile' %}" class="btn btn-primary">Edit Profile</a>
                {% else %}
                    <a href="{% url 'chat:create_chat' %}?user={{ profile_user.id }}" class="btn btn-primary">Send Message</a>
                {% endif %}
            </div>
        </div>
        
        <hr style="border: none; border-top: 1px solid #e0e0e0; margin: 30px 0;">
        
        <h2 style="margin-bottom: 20px;">Posts</h2>
        
        {% if posts %}
            <div style="display: grid; gap: 20px;">
                {% for post in posts %}
                    <div style="border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px;">
                        <h3><a href="{% url 'blog:post_detail' post.slug %}" style="color: #333; text-decoration: none;">
                            {{ post.title|default:"Untitled" }}
                        </a></h3>
                        <p style="color: #666; margin-top: 10px;">{{ post.content|truncatewords:50 }}</p>
                        <small style="color: #999;">{{ post.created_at|date:"M d, Y" }}</small>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p style="color: #666; text-align: center; padding: 40px;">No posts yet.</p>
        {% endif %}
    </div>
</div>
{% endblock %}